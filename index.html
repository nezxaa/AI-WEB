<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Adel Reva - AI Idol</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
  <style>
    :root {
      --primary: #7c3aed;
      --secondary: #f59e0b;
      --dark: #1e1b4b;
      --light: #f5f3ff;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background: linear-gradient(135deg, #1e1b4b 0%, #4c1d95 100%);
      color: var(--light);
    }
    
    .display-font {
      font-family: 'Playfair Display', serif;
    }
    
    #tsparticles {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    
    .glass-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }
    
    .glass-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--secondary) 0%, #f97316 100%);
      color: var(--dark);
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4);
    }
    
    .social-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }
    
    .social-icon:hover {
      background: var(--primary);
      transform: translateY(-3px);
    }
    
    /* Chat Interface */
    .chat-container {
      background: rgba(245, 243, 255, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .chat-sidebar {
      background: rgba(124, 58, 237, 0.7);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-right: 1px solid rgba(255, 255, 255, 0.15);
      transition: all 0.3s ease;
    }
    
    .user-message {
      background: var(--primary);
      color: white;
      border-radius: 18px 18px 4px 18px;
    }
    
    .bot-message {
      background: rgba(255, 255, 255, 0.95);
      color: #2d3748;
      border-radius: 18px 18px 18px 4px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
    }
    
    .chat-input {
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(124, 58, 237, 0.3);
      color: #1e1b4b;
    }
    
    .chat-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
    }
    
    /* Music Player */
    .music-player {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      padding: 12px;
    }
    
    .progress-bar {
      background: linear-gradient(90deg, var(--secondary) 0%, #f97316 100%);
    }
    
    /* Loading Screen */
    .loading-screen {
      background: linear-gradient(135deg, var(--dark) 0%, #4c1d95 100%);
    }
    
    .loading-dot {
      background: var(--secondary);
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-enter {
      animation: fadeIn 0.6s ease-out;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(0.95); opacity: 0.6; }
      50% { transform: scale(1.05); opacity: 1; }
    }
    
    .pulse-animation {
      animation: pulse 1.5s infinite ease-in-out;
    }
    
    /* Mobile Responsiveness */
    @media (max-width: 768px) {
      .glass-card {
        border-radius: 12px;
        margin: 1rem;
      }
      
      .profile-img {
        width: 120px;
        height: 120px;
      }
      
      .chat-container {
        border-radius: 12px 12px 0 0;
        height: 90vh;
      }
      
      .chat-sidebar {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        z-index: 10;
        transform: translateX(-100%);
        width: 280px;
      }
      
      .chat-sidebar.active {
        transform: translateX(0);
      }
      
      .sidebar-toggle {
        display: block;
      }
      
      .mobile-chat-header {
        display: flex;
      }
      
      .music-player {
        margin-bottom: 16px;
        width: 100%;
      }
      
      .close-sidebar {
        display: block;
      }
    }
    
    @media (min-width: 769px) {
      .chat-sidebar {
        transform: translateX(0) !important;
      }
      
      .sidebar-toggle {
        display: none;
      }
      
      .mobile-chat-header {
        display: none;
      }
      
      .close-sidebar {
        display: none;
      }
      
      .music-player {
        margin-bottom: 24px;
      }
    }
    
    .sidebar-toggle {
      position: absolute;
      left: 100%;
      top: 16px;
      background: rgba(124, 58, 237, 0.9);
      color: white;
      width: 36px;
      height: 36px;
      border-radius: 0 8px 8px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 11;
    }
    
    .mobile-chat-header {
      position: sticky;
      top: 0;
      background: rgba(124, 58, 237, 0.7);
      backdrop-filter: blur(10px);
      padding: 12px;
      z-index: 5;
      align-items: center;
      gap: 12px;
    }
    
    .online-status {
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      margin-left: auto;
    }
    
    .player-button {
      transition: all 0.2s ease;
    }
    
    .player-button:hover {
      transform: scale(1.1);
    }
    
    .close-sidebar {
      position: absolute;
      right: 12px;
      top: 12px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 12;
    }
    
    .chat-area {
      background: rgba(245, 243, 255, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 md:p-8">
<canvas id="tsparticles"></canvas>

<!-- Landing Page -->
<div id="landing" class="w-full max-w-4xl glass-card p-8 fade-enter">
  <div class="flex flex-col md:flex-row gap-8 items-center">
    <div class="flex flex-col items-center md:items-start">
      <div class="relative">
        <img src="https://i.pinimg.com/736x/b8/cd/56/b8cd569372fa550c4b2636ce596e19b8.jpg" 
             class="profile-img w-40 h-40 rounded-full object-cover border-4 border-white/20 shadow-lg">
        <div class="absolute -bottom-2 -right-2 bg-gradient-to-r from-amber-400 to-amber-600 text-white text-xs font-bold px-2 py-1 rounded-full">
          ONLINE
        </div>
      </div>
      
      <div class="flex gap-3 mt-4">
        <a href="https://twitter.com/AdelRevaaa" target="_blank" class="social-icon text-blue-400 hover:text-white">
          <i class="fab fa-twitter"></i>
        </a>
        <a href="https://www.instagram.com/adel.revaa/" target="_blank" class="social-icon text-pink-500 hover:text-white">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://www.tiktok.com/@adel.revaa/" target="_blank" class="social-icon text-black hover:text-white">
          <i class="fab fa-tiktok"></i>
        </a>
      </div>
    </div>
    
    <div class="flex-1 text-center md:text-left">
      <h1 class="display-font text-4xl md:text-5xl font-bold text-amber-400 mb-2">Adel Reva</h1>
      <p class="text-sm italic mb-4 text-white/80">Singer ✦ Idol ✦ Actress</p>
      <p class="mb-4 text-white/90">「おとなしい猫のように、あなたの心をいつも引きつけます。」</p>
      <p class="mb-6 text-sm text-white/80">"Like a calm cat, but will always captivate your heart. Hello everyone, I'm Adel!"</p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
        <div class="flex items-center">
          <i class="fas fa-birthday-cake text-amber-400 mr-2"></i>
          <span><strong>Birthday:</strong> July 14, 2006 (Cancer ♋︎)</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-map-marker-alt text-amber-400 mr-2"></i>
          <span><strong>From:</strong> Jakarta, Indonesia</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-music text-amber-400 mr-2"></i>
          <span><strong>Genres:</strong> J-Pop, Indo-Pop</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-history text-amber-400 mr-2"></i>
          <span><strong>Active:</strong> 2019-2024 (5 years)</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-trophy text-amber-400 mr-2"></i>
          <span><strong>Former:</strong> JKT48 8th Gen</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-gamepad text-amber-400 mr-2"></i>
          <span><strong>Hobby:</strong> Gaming & Badminton</span>
        </div>
      </div>
    </div>
  </div>
  
  <div class="mt-8 text-center">
    <button id="start-btn" class="btn-primary px-8 py-3 rounded-full text-sm md:text-base">
      <i class="fas fa-comment-dots mr-2"></i> Start Chatting with Adel
    </button>
  </div>
  
  <div class="mt-8 text-xs text-white/60 text-center">
    <p>✨ Powered by Shape & Neza AI Technology</p>
  </div>
</div>

<!-- Loading Screen -->
<div id="chat-loading" class="hidden fixed inset-0 z-50 flex flex-col items-center justify-center loading-screen">
  <div class="w-full max-w-md p-8 text-center">
    <div class="relative mx-auto mb-6">
      <img src="https://i.pinimg.com/736x/b8/cd/56/b8cd569372fa550c4b2636ce596e19b8.jpg" 
           class="w-24 h-24 rounded-full object-cover border-4 border-amber-400/30 shadow-lg mx-auto">
      <div class="absolute -bottom-2 -right-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full pulse-animation">
        <i class="fas fa-spinner fa-spin"></i>
      </div>
    </div>
    
    <h2 class="display-font text-2xl text-amber-400 mb-2">Preparing Chat Session</h2>
    <p class="text-white/80 mb-6">Loading Adel's personality and memories...</p>
    
    <div class="flex justify-center gap-2 mb-6">
      <div class="loading-dot w-3 h-3 rounded-full opacity-60" style="animation-delay: 0s"></div>
      <div class="loading-dot w-3 h-3 rounded-full opacity-60" style="animation-delay: 0.2s"></div>
      <div class="loading-dot w-3 h-3 rounded-full opacity-60" style="animation-delay: 0.4s"></div>
    </div>
    
    <div class="w-full bg-white/10 rounded-full h-2 mb-2">
      <div id="chat-loading-progress" class="bg-gradient-to-r from-amber-400 to-amber-600 h-2 rounded-full" style="width: 0%"></div>
    </div>
    
    <div class="flex justify-between text-xs text-white/80 mb-1">
      <span id="chat-loading-percent">0%</span>
      <span id="chat-loading-message">Initializing...</span>
    </div>
  </div>
</div>

<!-- Chat Page -->
<div id="chat-page" class="hidden w-full max-w-6xl h-[85vh] chat-container fade-enter overflow-hidden flex flex-col md:flex-row relative">
  <!-- Mobile Chat Header -->
  <div class="mobile-chat-header">
    <button id="mobile-sidebar-toggle" class="text-white">
      <i class="fas fa-bars"></i>
    </button>
    <img src="https://i.pinimg.com/736x/b8/cd/56/b8cd569372fa550c4b2636ce596e19b8.jpg" 
         class="w-8 h-8 rounded-full object-cover border-2 border-white/30">
    <span class="text-white font-medium">Adel Reva</span>
    <div class="flex items-center">
      <span class="text-xs text-white/80 mr-2">Online</span>
      <div class="online-status"></div>
    </div>
  </div>
  
  <!-- Sidebar Toggle -->
  <div class="sidebar-toggle md:hidden" id="sidebar-toggle">
    <i class="fas fa-bars"></i>
  </div>
  
  <!-- Sidebar -->
  <div id="chat-sidebar" class="w-full md:w-80 flex-shrink-0 chat-sidebar p-5 text-white flex flex-col">
    <!-- Close Sidebar Button (Mobile) -->
    <button class="close-sidebar md:hidden" id="close-sidebar">
      <i class="fas fa-chevron-left"></i>
    </button>
    
    <div class="flex items-center gap-3 mb-4">
      <img src="https://i.pinimg.com/736x/b8/cd/56/b8cd569372fa550c4b2636ce596e19b8.jpg" 
           class="w-12 h-12 rounded-full object-cover border-2 border-white/30">
      <div>
        <h3 class="font-bold">Adel Reva</h3>
        <p class="text-xs text-white/80">AI Chat Companion</p>
      </div>
    </div>
    
    <button id="back-btn" class="flex items-center gap-2 text-white/80 hover:text-white mb-4 transition">
      <i class="fas fa-chevron-left"></i>
      <span>Back to Profile</span>
    </button>
    
    <button id="clear-chat" class="flex items-center gap-2 text-white/80 hover:text-white transition">
      <i class="fas fa-trash-alt"></i>
      <span>Clear Conversation</span>
    </button>
    
    <!-- Music Player in Sidebar (Chat Page Only) -->
    <div class="music-player">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-sm font-semibold text-white flex items-center gap-1">
          <i class="fas fa-music text-amber-400"></i>
          <span>Now Playing</span>
        </h3>
      </div>
      
      <div class="flex items-center gap-3 mb-3">
        <img src="https://i.pinimg.com/736x/da/b5/2a/dab52a3edd3ae07586f09157f81de733.jpg" 
             class="w-12 h-12 rounded-lg object-cover shadow">
        <div>
          <h4 class="text-white font-medium text-sm">One Thing</h4>
          <p class="text-white/70 text-xs">Chillpeach</p>
        </div>
      </div>
      
      <div class="mb-2">
        <div class="player-progress bg-white/20 rounded-full h-1.5 w-full mb-1" id="progress-container">
          <div class="progress-bar h-full rounded-full" id="progress-bar" style="width: 0%"></div>
        </div>
        <div class="flex justify-between text-xs text-white/70">
          <span id="current-time">0:00</span>
          <span id="duration">3:14</span>
        </div>
      </div>
      
      <div class="flex justify-between items-center">
        <div class="flex gap-2">
          <button class="player-button text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10" id="prev-button">
            <i class="fas fa-step-backward text-xs"></i>
          </button>
          <button class="player-button bg-amber-400 text-purple-900 w-8 h-8 rounded-full flex items-center justify-center hover:bg-amber-300" id="play-button">
            <i class="fas fa-play text-xs" id="play-icon"></i>
          </button>
          <button class="player-button text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10" id="next-button">
            <i class="fas fa-step-forward text-xs"></i>
          </button>
        </div>
        
        <button class="player-button text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10 relative" id="volume-button">
          <i class="fas fa-volume-up text-xs" id="volume-icon"></i>
          <div class="volume-control absolute bottom-10 right-0 bg-purple-900 rounded-lg p-3 shadow-lg hidden" id="volume-control">
            <input type="range" min="0" max="1" step="0.01" value="0.5" 
                   class="volume-slider w-24 h-1 appearance-none bg-white/20 rounded-full" id="volume-slider">
          </div>
        </button>
      </div>
    </div>
    
    <!-- Adel Personality at Bottom -->
    <div class="mt-auto pt-4 border-t border-white/10">
      <p class="text-xs text-white/60 mb-2">Adel's Personality:</p>
      <div class="flex flex-wrap gap-2">
        <span class="bg-white/10 text-xs px-2 py-1 rounded-full">Friendly</span>
        <span class="bg-white/10 text-xs px-2 py-1 rounded-full">Playful</span>
        <span class="bg-white/10 text-xs px-2 py-1 rounded-full">Idol</span>
        <span class="bg-white/10 text-xs px-2 py-1 rounded-full">Gamer</span>
      </div>
    </div>
  </div>
  
  <!-- Chat Area -->
  <div class="flex-1 flex flex-col chat-area">
    <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-4"></div>
    
    <div class="p-4 bg-white/90 backdrop-filter backdrop-blur-md border-t border-white/20">
      <div class="flex gap-2">
        <input id="user-input" type="text" placeholder="Message Adel..." 
               class="flex-1 chat-input px-4 py-3 rounded-full text-sm focus:outline-none">
        <button id="send-button" class="bg-purple-600 text-white w-12 h-12 rounded-full hover:bg-purple-700 transition">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Music Player (Landing Page Only) -->
<div class="music-player fixed bottom-4 right-4 rounded-xl overflow-hidden w-72 z-40 transition-all duration-300" id="landing-music-player">
  <div class="p-4">
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-sm font-semibold text-white flex items-center gap-1">
        <i class="fas fa-music text-amber-400"></i>
        <span>Now Playing</span>
      </h3>
      <button id="collapse-button" class="text-white/70 hover:text-white text-sm">
        <i class="fas fa-chevron-down" id="collapse-icon"></i>
      </button>
    </div>
    
    <div class="player-content" id="player-content">
      <div class="flex items-center gap-3 mb-4">
        <img src="https://i.pinimg.com/736x/da/b5/2a/dab52a3edd3ae07586f09157f81de733.jpg" 
             class="w-14 h-14 rounded-lg object-cover shadow">
        <div>
          <h4 class="text-white font-medium text-sm">One Thing</h4>
          <p class="text-white/70 text-xs">Chillpeach</p>
        </div>
      </div>
      
      <div class="mb-2">
        <div class="player-progress bg-white/20 rounded-full h-1.5 w-full mb-1" id="landing-progress-container">
          <div class="progress-bar h-full rounded-full" id="landing-progress-bar" style="width: 0%"></div>
        </div>
        <div class="flex justify-between text-xs text-white/70">
          <span id="landing-current-time">0:00</span>
          <span id="landing-duration">3:14</span>
        </div>
      </div>
      
      <div class="flex justify-between items-center">
        <div class="flex gap-2">
          <button class="player-button text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10" id="landing-prev-button">
            <i class="fas fa-step-backward text-xs"></i>
          </button>
          <button class="player-button bg-amber-400 text-purple-900 w-8 h-8 rounded-full flex items-center justify-center hover:bg-amber-300" id="landing-play-button">
            <i class="fas fa-play text-xs" id="landing-play-icon"></i>
          </button>
          <button class="player-button text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10" id="landing-next-button">
            <i class="fas fa-step-forward text-xs"></i>
          </button>
        </div>
        
        <button class="player-button text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10 relative" id="landing-volume-button">
          <i class="fas fa-volume-up text-xs" id="landing-volume-icon"></i>
          <div class="volume-control absolute bottom-10 right-0 bg-purple-900 rounded-lg p-3 shadow-lg hidden" id="landing-volume-control">
            <input type="range" min="0" max="1" step="0.01" value="0.5" 
                   class="volume-slider w-24 h-1 appearance-none bg-white/20 rounded-full" id="landing-volume-slider">
          </div>
        </button>
      </div>
    </div>
  </div>
</div>

<audio id="bgm" loop>
  <source src="https://files.catbox.moe/5actxy.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
  const apiKey = "4BIOPXYUIQYKI93MYJFM5M1W0LPRVVGHB0AF9GIYBE0";
  const model = "shapesinc/adel-nezaa";

  // Particles.js configuration
  tsParticles.load("tsparticles", {
    background: { color: { value: "transparent" } },
    fpsLimit: 60,
    particles: {
      number: { value: 60 },
      color: { value: "#ffffff" },
      shape: { type: "circle" },
      opacity: { value: { min: 0.1, max: 0.3 } },
      size: { value: { min: 1, max: 3 } },
      move: {
        enable: true,
        speed: 1,
        direction: "none",
        random: true,
        straight: false,
        out_mode: "bounce",
        bounce: true
      },
    },
    interactivity: {
      events: {
        onHover: {
          enable: true,
          mode: "repulse",
        },
      },
      modes: {
        repulse: {
          distance: 80,
          duration: 0.4,
        },
      },
    },
    detectRetina: true,
  });

  // DOM Content Loaded
  document.addEventListener("DOMContentLoaded", () => {
    const messagesContainer = document.getElementById("messages");
    const chatLoading = document.getElementById("chat-loading");
    const chatLoadingProgress = document.getElementById("chat-loading-progress");
    const chatLoadingPercent = document.getElementById("chat-loading-percent");
    const chatLoadingMessage = document.getElementById("chat-loading-message");
    const chatSidebar = document.getElementById("chat-sidebar");
    const sidebarToggle = document.getElementById("sidebar-toggle");
    const mobileSidebarToggle = document.getElementById("mobile-sidebar-toggle");
    const closeSidebar = document.getElementById("close-sidebar");

    // Toggle sidebar on mobile
    function toggleSidebar() {
      chatSidebar.classList.toggle("active");
    }

    sidebarToggle.addEventListener("click", toggleSidebar);
    mobileSidebarToggle.addEventListener("click", toggleSidebar);
    closeSidebar.addEventListener("click", toggleSidebar);

    // Close sidebar when clicking outside on mobile
    document.addEventListener("click", (e) => {
      if (window.innerWidth <= 768 && 
          !chatSidebar.contains(e.target) && 
          !sidebarToggle.contains(e.target) &&
          !mobileSidebarToggle.contains(e.target) &&
          !closeSidebar.contains(e.target) &&
          chatSidebar.classList.contains("active")) {
        chatSidebar.classList.remove("active");
      }
    });

    // Start Chat Button
    document.getElementById("start-btn").addEventListener("click", () => {
      chatLoading.classList.remove("hidden");
      
      let progress = 0;
      const loadingMessages = [
        "Initializing chat system...",
        "Loading Adel's personality...",
        "Preparing conversation memory...",
        "Finalizing connection...",
        "Ready to chat with Adel!"
      ];
      
      const loadingInterval = setInterval(() => {
        progress += Math.random() * 15 + 5;
        if (progress > 100) progress = 100;
        
        chatLoadingProgress.style.width = `${progress}%`;
        chatLoadingPercent.textContent = `${Math.floor(progress)}%`;
        
        if (progress < 25) chatLoadingMessage.textContent = loadingMessages[0];
        else if (progress < 50) chatLoadingMessage.textContent = loadingMessages[1];
        else if (progress < 75) chatLoadingMessage.textContent = loadingMessages[2];
        else if (progress < 90) chatLoadingMessage.textContent = loadingMessages[3];
        else chatLoadingMessage.textContent = loadingMessages[4];
        
        if (progress === 100) {
          clearInterval(loadingInterval);
          setTimeout(() => {
            chatLoading.classList.add("hidden");
            document.getElementById("landing").classList.add("hidden");
            document.getElementById("chat-page").classList.remove("hidden");
            document.getElementById("landing-music-player").classList.add("hidden");
            messagesContainer.innerHTML = "";
            appendMessage("bot", "Hai! I'm Adel Reva~ 😊 What would you like to chat about today?");
          }, 500);
        }
      }, 200);
    });

    // Back Button
    document.getElementById("back-btn").addEventListener("click", () => {
      document.getElementById("chat-page").classList.add("hidden");
      document.getElementById("landing").classList.remove("hidden");
      document.getElementById("landing-music-player").classList.remove("hidden");
    });

    // Send Message Functionality
    document.getElementById("send-button").addEventListener("click", sendMessage);
    document.getElementById("user-input").addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    // Clear Chat
    document.getElementById("clear-chat").addEventListener("click", () => {
      messagesContainer.innerHTML = "";
      appendMessage("bot", "Chat has been cleared! Let's start fresh~ 💫");
    });

    // Append Message to Chat
    function appendMessage(role, text) {
      const msg = document.createElement("div");
      msg.className = `flex ${role === 'user' ? 'justify-end' : 'gap-2'}`;
      
      if (role === 'user') {
        msg.innerHTML = `
          <div class="user-message px-4 py-2 max-w-xs md:max-w-md">
            ${text}
          </div>
        `;
      } else {
        msg.innerHTML = `
          <img src="https://i.pinimg.com/736x/b8/cd/56/b8cd569372fa550c4b2636ce596e19b8.jpg" 
               class="w-8 h-8 rounded-full object-cover flex-shrink-0">
          <div class="bot-message px-4 py-2 max-w-xs md:max-w-md">
            ${text}
          </div>
        `;
      }
      
      messagesContainer.appendChild(msg);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Send Message to AI
    function sendMessage() {
      const input = document.getElementById("user-input");
      const text = input.value.trim();
      if (!text) return;
      
      appendMessage("user", text);
      input.value = "";
      
      // Show typing indicator
      const typingIndicator = document.createElement("div");
      typingIndicator.className = "flex gap-2";
      typingIndicator.innerHTML = `
        <img src="https://i.pinimg.com/736x/b8/cd/56/b8cd569372fa550c4b2636ce596e19b8.jpg" 
             class="w-8 h-8 rounded-full object-cover flex-shrink-0">
        <div class="bot-message px-4 py-2 max-w-xs md:max-w-md flex items-center gap-1">
          <div class="typing-dot w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0s"></div>
          <div class="typing-dot w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
          <div class="typing-dot w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
        </div>
      `;
      messagesContainer.appendChild(typingIndicator);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // Send to AI API
      fetch("https://api.shapes.inc/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          model,
          messages: [{ role: "user", content: text }]
        })
      })
      .then(res => res.json())
      .then(data => {
        // Remove typing indicator
        messagesContainer.removeChild(typingIndicator);
        
        const reply = data.choices[0].message.content;
        appendMessage("bot", reply);
      })
      .catch(err => {
        console.error(err);
        messagesContainer.removeChild(typingIndicator);
        appendMessage("bot", "Oops! Something went wrong. Maybe try again later? 😅");
      });
    }
  });

  // Music Player Functionality for Chat Page
  document.addEventListener("DOMContentLoaded", function() {
    const bgm = document.getElementById("bgm");
    const playButton = document.getElementById("play-button");
    const playIcon = document.getElementById("play-icon");
    const progressBar = document.getElementById("progress-bar");
    const progressContainer = document.getElementById("progress-container");
    const currentTimeDisplay = document.getElementById("current-time");
    const durationDisplay = document.getElementById("duration");
    const volumeButton = document.getElementById("volume-button");
    const volumeIcon = document.getElementById("volume-icon");
    const volumeControl = document.getElementById("volume-control");
    const volumeSlider = document.getElementById("volume-slider");
    const prevButton = document.getElementById("prev-button");
    const nextButton = document.getElementById("next-button");

    // Initialize audio
    bgm.volume = 0.5;
    
    // Format time (seconds to MM:SS)
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }
    
    // Update progress bar
    function updateProgress() {
      const currentTime = bgm.currentTime;
      const duration = bgm.duration || 1;
      const progressPercent = (currentTime / duration) * 100;
      progressBar.style.width = `${progressPercent}%`;
      currentTimeDisplay.textContent = formatTime(currentTime);
      
      if (bgm.duration && !isNaN(bgm.duration)) {
        durationDisplay.textContent = formatTime(bgm.duration);
      }
    }
    
    // Set progress when clicked on progress bar
    function setProgress(e) {
      const width = this.clientWidth;
      const clickX = e.offsetX;
      const duration = bgm.duration;
      bgm.currentTime = (clickX / width) * duration;
    }
    
    // Toggle play/pause
    function togglePlay() {
      if (bgm.paused) {
        bgm.play()
          .then(() => {
            playIcon.classList.remove("fa-play");
            playIcon.classList.add("fa-pause");
          })
          .catch(error => {
            console.error("Audio playback failed:", error);
          });
      } else {
        bgm.pause();
        playIcon.classList.remove("fa-pause");
        playIcon.classList.add("fa-play");
      }
    }
    
    // Toggle volume control
    function toggleVolumeControl(e) {
      e.stopPropagation();
      volumeControl.classList.toggle("hidden");
    }
    
    // Set volume
    function setVolume() {
      bgm.volume = this.value;
      if (this.value == 0) {
        volumeIcon.classList.remove("fa-volume-up", "fa-volume-down");
        volumeIcon.classList.add("fa-volume-mute");
      } else if (this.value < 0.5) {
        volumeIcon.classList.remove("fa-volume-up", "fa-volume-mute");
        volumeIcon.classList.add("fa-volume-down");
      } else {
        volumeIcon.classList.remove("fa-volume-down", "fa-volume-mute");
        volumeIcon.classList.add("fa-volume-up");
      }
    }
    
    // Event listeners
    playButton.addEventListener("click", togglePlay);
    progressContainer.addEventListener("click", setProgress);
    volumeButton.addEventListener("click", toggleVolumeControl);
    volumeSlider.addEventListener("input", setVolume);
    
    // Previous/next buttons
    prevButton.addEventListener("click", () => {
      bgm.currentTime = 0;
    });
    
    nextButton.addEventListener("click", () => {
      bgm.currentTime = bgm.duration - 0.1;
    });
    
    // Update time as audio plays
    bgm.addEventListener("timeupdate", updateProgress);
    bgm.addEventListener("ended", () => {
      playIcon.classList.remove("fa-pause");
      playIcon.classList.add("fa-play");
    });
    
    // Load metadata when audio is ready
    bgm.addEventListener("loadedmetadata", () => {
      durationDisplay.textContent = formatTime(bgm.duration);
    });
    
    // Close volume control when clicking outside
    document.addEventListener("click", (e) => {
      if (!volumeButton.contains(e.target) && !volumeControl.contains(e.target)) {
        volumeControl.classList.add("hidden");
      }
    });
    
    // Initialize player state
    updateProgress();
  });

  // Music Player Functionality for Landing Page
  document.addEventListener("DOMContentLoaded", function() {
    const bgm = document.getElementById("bgm");
    const playButton = document.getElementById("landing-play-button");
    const playIcon = document.getElementById("landing-play-icon");
    const progressBar = document.getElementById("landing-progress-bar");
    const progressContainer = document.getElementById("landing-progress-container");
    const currentTimeDisplay = document.getElementById("landing-current-time");
    const durationDisplay = document.getElementById("landing-duration");
    const volumeButton = document.getElementById("landing-volume-button");
    const volumeIcon = document.getElementById("landing-volume-icon");
    const volumeControl = document.getElementById("landing-volume-control");
    const volumeSlider = document.getElementById("landing-volume-slider");
    const prevButton = document.getElementById("landing-prev-button");
    const nextButton = document.getElementById("landing-next-button");
    const collapseButton = document.getElementById("collapse-button");
    const collapseIcon = document.getElementById("collapse-icon");
    const playerContent = document.getElementById("player-content");
    const musicPlayer = document.getElementById("landing-music-player");

    // Initialize audio
    bgm.volume = 0.5;
    
    // Format time (seconds to MM:SS)
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }
    
    // Update progress bar
    function updateProgress() {
      const currentTime = bgm.currentTime;
      const duration = bgm.duration || 1;
      const progressPercent = (currentTime / duration) * 100;
      progressBar.style.width = `${progressPercent}%`;
      currentTimeDisplay.textContent = formatTime(currentTime);
      
      if (bgm.duration && !isNaN(bgm.duration)) {
        durationDisplay.textContent = formatTime(bgm.duration);
      }
    }
    
    // Set progress when clicked on progress bar
    function setProgress(e) {
      const width = this.clientWidth;
      const clickX = e.offsetX;
      const duration = bgm.duration;
      bgm.currentTime = (clickX / width) * duration;
    }
    
    // Toggle play/pause
    function togglePlay() {
      if (bgm.paused) {
        bgm.play()
          .then(() => {
            playIcon.classList.remove("fa-play");
            playIcon.classList.add("fa-pause");
          })
          .catch(error => {
            console.error("Audio playback failed:", error);
          });
      } else {
        bgm.pause();
        playIcon.classList.remove("fa-pause");
        playIcon.classList.add("fa-play");
      }
    }
    
    // Toggle volume control
    function toggleVolumeControl(e) {
      e.stopPropagation();
      volumeControl.classList.toggle("hidden");
    }
    
    // Set volume
    function setVolume() {
      bgm.volume = this.value;
      if (this.value == 0) {
        volumeIcon.classList.remove("fa-volume-up", "fa-volume-down");
        volumeIcon.classList.add("fa-volume-mute");
      } else if (this.value < 0.5) {
        volumeIcon.classList.remove("fa-volume-up", "fa-volume-mute");
        volumeIcon.classList.add("fa-volume-down");
      } else {
        volumeIcon.classList.remove("fa-volume-down", "fa-volume-mute");
        volumeIcon.classList.add("fa-volume-up");
      }
    }
    
    // Toggle player collapse
    function toggleCollapse() {
      playerContent.classList.toggle("hidden");
      musicPlayer.classList.toggle("h-16");
      collapseIcon.classList.toggle("fa-chevron-down");
      collapseIcon.classList.toggle("fa-chevron-up");
    }
    
    // Event listeners
    playButton.addEventListener("click", togglePlay);
    progressContainer.addEventListener("click", setProgress);
    volumeButton.addEventListener("click", toggleVolumeControl);
    volumeSlider.addEventListener("input", setVolume);
    collapseButton.addEventListener("click", toggleCollapse);
    
    // Previous/next buttons
    prevButton.addEventListener("click", () => {
      bgm.currentTime = 0;
    });
    
    nextButton.addEventListener("click", () => {
      bgm.currentTime = bgm.duration - 0.1;
    });
    
    // Update time as audio plays
    bgm.addEventListener("timeupdate", updateProgress);
    bgm.addEventListener("ended", () => {
      playIcon.classList.remove("fa-pause");
      playIcon.classList.add("fa-play");
    });
    
    // Load metadata when audio is ready
    bgm.addEventListener("loadedmetadata", () => {
      durationDisplay.textContent = formatTime(bgm.duration);
    });
    
    // Close volume control when clicking outside
    document.addEventListener("click", (e) => {
      if (!volumeButton.contains(e.target) && !volumeControl.contains(e.target)) {
        volumeControl.classList.add("hidden");
      }
    });
    
    // Initialize player state
    updateProgress();
  });
</script>

</body>
</html>